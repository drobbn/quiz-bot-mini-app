# Инструкция по настройке Telegram Mini App

## Шаг 1: Разместите файлы на веб-сервере

Скопируйте все файлы из папки `mini_app/` на ваш веб-сервер. Можно использовать:

- **GitHub Pages** (бесплатно)
- **Vercel** (бесплатно)
- **Netlify** (бесплатно)
- Любой другой хостинг с поддержкой статических файлов

### Пример для GitHub Pages:

1. Создайте репозиторий на GitHub
2. Загрузите файлы из `mini_app/` в корень репозитория
3. Включите GitHub Pages в настройках репозитория
4. URL будет: `https://your-username.github.io/repository-name/`

## Шаг 2: Обновите манифест

Отредактируйте файл `tonconnect-manifest.json` и укажите правильные URL:

```json
{
  "url": "https://your-domain.com/mini_app/",
  "name": "Quiz Bot - Викторина с наградами",
  "iconUrl": "https://your-domain.com/mini_app/icon.png",
  "termsOfUseUrl": "https://your-domain.com/mini_app/terms.txt",
  "privacyPolicyUrl": "https://your-domain.com/mini_app/privacy.txt"
}
```

**Важно:** URL должен быть доступен по HTTPS и иметь правильные CORS заголовки.

## Шаг 3: Настройте переменную окружения

В файле `.env` добавьте:

```
MINI_APP_URL=https://your-domain.com/mini_app/
```

**Пример:**
```
MINI_APP_URL=https://your-username.github.io/quiz-bot-mini-app/
```

## Шаг 4: Проверьте работу

1. Запустите бота
2. Нажмите `/start`
3. Нажмите кнопку "Авторизоваться через Tonkeeper"
4. Должно открыться окно Mini App
5. Подключите кошелек
6. Кошелек должен автоматически подключиться в боте

## Дополнительные файлы (опционально)

Вы можете добавить:
- `icon.png` - иконка приложения (рекомендуется 48x48 или больше)
- `terms.txt` - условия использования
- `privacy.txt` - политика конфиденциальности

Эти файлы должны быть доступны по URL, указанным в манифесте.

## Устранение проблем

### Mini App не открывается
- Проверьте, что `MINI_APP_URL` указан правильно в `.env`
- Убедитесь, что URL доступен по HTTPS
- Проверьте, что файл `index.html` доступен по указанному URL

### Авторизация не работает
- Проверьте, что `tonconnect-manifest.json` доступен по URL
- Убедитесь, что манифест содержит правильные URL
- Проверьте консоль браузера на наличие ошибок

### Данные не отправляются в бота
- Убедитесь, что бот запущен
- Проверьте логи бота на наличие ошибок
- Убедитесь, что обработчик `handle_web_app_data` зарегистрирован

